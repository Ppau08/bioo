<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Bioquímica Interactiva</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background-color: #111;
      color: #fff;
      display: flex;
      flex-direction: row;
      overflow-x: auto;
    }
    .anio {
      flex: 0 0 16.6%;
      padding: 1rem;
      box-sizing: border-box;
      border-right: 1px solid #444;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: 100vh;
    }
    .anio h2 {
      text-align: center;
      margin-bottom: 1rem;
    }
    .cuatrimestre {
      background-color: #222;
      border-radius: 15px;
      padding: 1rem;
      margin-bottom: 1rem;
      height: 45%;
      overflow-y: auto;
    }
    .cuatrimestre.verde {
      border: 2px solid green;
    }
    .cuatrimestre.rojo {
      border: 2px solid red;
    }
    .materia {
      background-color: gray;
      border-radius: 10px;
      padding: 0.5rem;
      margin: 0.5rem 0;
      text-align: center;
      font-size: 1rem;
      cursor: pointer;
      transition: 0.3s;
    }
    .materia.desbloqueada {
      background-color: white;
      color: black;
    }
    .materia.regularizada {
      background-color: lightgreen;
      color: black;
    }
    .materia.aprobada {
      background-color: darkgreen;
      color: white;
      text-decoration: line-through;
    }
  </style>
</head>
<body>
  <script>
    const malla = [
  {
    anio: 1,
    cuatrimestres: [
      {
        color: 'verde',
        materias: [
          { nombre: 'Álgebra y Geometría Analítica', id: 'algebra', correlativas: [] },
          { nombre: 'Química General', id: 'quim_gen', correlativas: [] },
        ]
      },
      {
        color: 'rojo',
        materias: [
          { nombre: 'Cálculo Diferencial e Integral', id: 'calculo', correlativas: ['algebra'] },
          { nombre: 'Química Inorgánica', id: 'quim_inorg', correlativas: ['quim_gen'] },
          { nombre: 'Biología General y Celular', id: 'biologia', correlativas: ['quim_gen'] },
        ]
      }
    ]
  },
  {
    anio: 2,
    cuatrimestres: [
      {
        color: 'verde',
        materias: [
          { nombre: 'Mecánica, Calor y Termodinámica', id: 'mecanica', correlativas: ['quim_inorg', 'calculo'] },
          { nombre: 'Química Orgánica I', id: 'organica1', correlativas: ['quim_inorg'] },
          { nombre: 'Morfología', id: 'morfologia', correlativas: ['biologia'] }
        ]
      },
      {
        color: 'rojo',
        materias: [
          { nombre: 'Electricidad, Magnetismo, Óptica y Sonido', id: 'electricidad', correlativas: ['mecanica'] },
          { nombre: 'Química Orgánica II', id: 'organica2', correlativas: ['organica1'] },
          { nombre: 'Química Analítica', id: 'analitica', correlativas: ['calculo'] },
          { nombre: 'Prueba de Traducción', id: 'traduccion', correlativas: [] }
        ]
      }
    ]
  },
  {
    anio: 3,
    cuatrimestres: [
      {
        color: 'verde',
        materias: [
          { nombre: 'Química Biológica I', id: 'biologica1', correlativas: ['mecanica', 'analitica', 'organica2'] },
          { nombre: 'Química Física Biológica', id: 'fisica_bio', correlativas: ['analitica', 'organica2'] },
          { nombre: 'Bioestadística', id: 'bioestadistica', correlativas: ['analitica'] }
        ]
      },
      {
        color: 'rojo',
        materias: [
          { nombre: 'Química Biológica II', id: 'biologica2', correlativas: ['biologica1', 'fisica_bio', 'organica2'] },
          { nombre: 'Genética y Biología Molecular', id: 'genetica', correlativas: ['biologica1', 'organica2'] },
          { nombre: 'Química Analítica Instrumental', id: 'instrumental', correlativas: ['bioestadistica', 'fisica_bio', 'organica2'] },
          { nombre: 'Prueba de Manejo de Software', id: 'software', correlativas: [] }
        ]
      }
    ]
  },
  {
    anio: 4,
    cuatrimestres: [
      {
        color: 'verde',
        materias: [
          { nombre: 'Virología Clínica', id: 'virologia', correlativas: ['genetica', 'biologica2', 'bioestadistica'] },
          { nombre: 'Microbiología General', id: 'microbiologia', correlativas: ['genetica', 'biologica1', 'biologica2'] },
          { nombre: 'Fisiología Humana', id: 'fisiologia', correlativas: ['biologica2', 'morfologia'] },
          { nombre: 'Farmacología', id: 'farmacologia', correlativas: ['biologica2', 'organica2'] }
        ]
      },
      {
        color: 'rojo',
        materias: [
          { nombre: 'Bromatología y Nutrición', id: 'bromatologia', correlativas: ['microbiologia', 'instrumental'] },
          { nombre: 'Fisiopatología', id: 'fisiopatologia', correlativas: ['fisiologia', 'microbiologia', 'fisica_bio', 'biologica2'] },
          { nombre: 'Inmunología Clínica', id: 'inmunologia', correlativas: ['microbiologia', 'fisiologia', 'bioestadistica', 'genetica'] },
          { nombre: 'Parasitología Humana', id: 'parasitologia', correlativas: ['microbiologia', 'fisiologia', 'bioestadistica', 'genetica'] }
        ]
      }
    ]
  },
  {
    anio: 5,
    cuatrimestres: [
      {
        color: 'verde',
        materias: [
          { nombre: 'Bacteriología y Micología Clínica', id: 'bacteriologia', correlativas: ['fisiopatologia', 'inmunologia'] },
          { nombre: 'Química Clínica', id: 'quimica_clinica', correlativas: ['fisiopatologia'] },
          { nombre: 'Toxicología y Química Legal', id: 'toxicologia', correlativas: ['fisiopatologia'] },
          { nombre: 'Ética Profesional', id: 'etica', correlativas: [] }
        ]
      },
      {
        color: 'rojo',
        materias: [
          { nombre: 'Hematología Clínica', id: 'hematologia', correlativas: ['bioestadistica', 'fisiopatologia', 'inmunologia'] },
          { nombre: 'Endocrinología y Monitoreo de Drogas', id: 'endocrinologia', correlativas: ['fisiopatologia', 'inmunologia'] },
          { nombre: 'Optativa I', id: 'optativa1', correlativas: [] },
          { nombre: 'Gestión de Laboratorio', id: 'gestion', correlativas: ['quimica_clinica'] },
          { nombre: 'Epistemología e Investigación', id: 'epistemologia', correlativas: ['toxicologia', 'bromatologia'] }
        ]
      }
    ]
  },
  {
    anio: 6,
    cuatrimestres: [
      {
        color: 'verde',
        materias: [
          { nombre: 'Práctica Hospitalaria', id: 'hospitalaria', correlativas: ['hematologia', 'bacteriologia', 'endocrinologia', 'gestion', 'virologia', 'inmunologia', 'parasitologia', 'quimica_clinica'] }
        ]
      },
      {
        color: 'rojo',
        materias: [
          { nombre: 'Práctica Optativa', id: 'optativa2', correlativas: ['hospitalaria'] }
        ]
      }
    ]
  }
];

    const estadoMaterias = {};

    function crearMalla() {
      malla.forEach(anio => {
        const col = document.createElement('div');
        col.className = 'anio';
        col.innerHTML = `<h2>${anio.anio}°</h2>`;

        anio.cuatrimestres.forEach(cuat => {
          const cuatDiv = document.createElement('div');
          cuatDiv.className = `cuatrimestre ${cuat.color}`;

          cuat.materias.forEach(mat => {
            const matDiv = document.createElement('div');
            matDiv.className = 'materia bloqueada';
            matDiv.innerText = mat.nombre;
            matDiv.dataset.id = mat.id;
            matDiv.addEventListener('click', () => cambiarEstado(matDiv));
            estadoMaterias[mat.id] = 'bloqueada';
            cuatDiv.appendChild(matDiv);
          });

          col.appendChild(cuatDiv);
        });

        document.body.appendChild(col);
      });

      actualizarEstados();
    }

    function cambiarEstado(div) {
      const id = div.dataset.id;
      let estado = estadoMaterias[id];

      if (estado === 'bloqueada') return;
      else if (estado === 'desbloqueada') estadoMaterias[id] = 'regularizada';
      else if (estado === 'regularizada') estadoMaterias[id] = 'aprobada';
      else estadoMaterias[id] = 'desbloqueada';

      actualizarEstados();
    }

    function actualizarEstados() {
      document.querySelectorAll('.materia').forEach(div => {
        const id = div.dataset.id;
        div.className = 'materia ' + estadoMaterias[id];
      });

      desbloquearMaterias();
    }

    function desbloquearMaterias() {
      malla.forEach(anio => {
        anio.cuatrimestres.forEach(cuat => {
          cuat.materias.forEach(mat => {
            if (estadoMaterias[mat.id] === 'bloqueada') {
              const puede = mat.correlativas.every(c => estadoMaterias[c] === 'regularizada' || estadoMaterias[c] === 'aprobada');
              if (puede) estadoMaterias[mat.id] = 'desbloqueada';
            }
          });
        });
      });
    }

    crearMalla();
  </script>
</body>
</html>

